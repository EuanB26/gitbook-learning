# RELRO

## Background

This requires a bit of knowledge about the [GOT and PLT](../theory/got-and-plt.md) tables. If you're not sure what they are, go take a look at the page.

But if we need a simple refresher, we know that the GOT \(Global Offset Table\) is used to dynamically find functions that are located in shared libraries, such as libc and ld. These calls, one the program has been run at least once, will point to the PLT \(Procedure Linkage Table\), which stores the x86 instructions to call the specific function from the GOT.

There are a few implications of this:

* The PLT needs to be located at a fixed offset from the `.text` section
* As GOT contains data used by different parts of the program, it needs to be allocated at a known static address in memory
* As the GOT is lazily bound, it needs to be writable

As GOT exists at a predefined place in memory, an attacker could exploit a vulnerability to write 4 bytes at a controlled place in memory \(such as integer overflows leading to out-of-bounds write\), may be exploited to allow arbitrary code execution.

## RELRO

To prevent this, the compiler needs to ensure that the linker resolves all dynamically linked functions at the beginning of executing the binary, to make the GOT read-only. This is known as RELRO \(Relocation Read-Only\). Having the GOT being read-only, this stops the overwritting of its entries.

RELRO can be turned on via

```text
gcc -g -O0 -W1
```

