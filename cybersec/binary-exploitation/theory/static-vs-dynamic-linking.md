# Static vs Dynamic Linking

A file can either be statically linked, or dynamically linked. It is common nowadays to see programs dynamically linked.

## Statically linked

_Statically linked binaries_ are ones where they contain the necessary features to run, which are linked at compile time, ie. they live inside the binary. This is an ideal way to compile programs if they're rather small so that they're portable.

### Advantage

The advantage of this is that the program can run as soon as it's started, it doesn't need to wait for any libraries to be included.

Another advantage is that it removes external dependency on the libraries. If the library that you're using changes, then the program won't need to worry about it, as it has the library already imported into the program, meaning that hopefully your program won't break due to the new function.

The binary is portable across all platforms. Due to the binary having the functions inside the code, it again doesn't need any external dependencies, so it would be able to work on all versions of Linux, or all versions of Windows for example.

### Disadvantage

However, due to the functions living inside the binary, this increases the size of the executable, so it's not the best for disk-space usage.

Another disadvantage is that, in contrary to the second advantage, if there's a change to the library, the program won't be able to use that feature, unless the binary is recompiled with the extra function in the library.

Similarly, if a bug is in the library, then you'll need to recompile the binary with the bug fix to keep your code up to date and bug free, whether that be from a vulnerability point of view, or a dependency error.

## Dynamically linked libraries

_Dynamically linking binaries_ are ones where they contain a small statically linked function which is calls once the program starts.  
This static function will map the link library into memory and run the code that the functions contain. The link library determines where all the dynamic libraries are located, then mapping the libraries into the middle of the virtual memory and resolving the references to the symbols contained in those libraries.

### Working with the GOT

When a dynamically linked binary calls a function inside a linkable library \(say `puts()` from `libc`\), the call actually points to the PLT \(located, funnily enough, in the `.plt` section\). This will then, due to how the [GOT and PLT](got-and-plt.md) work, point to the GOT, which'll then point to the shared library function \(the actual address of `puts()`\)

### Advantages

Due to not storing the functions within the program, the disk-space usage isn't as large. A Dynamically Linked Library \(DLL\) is loaded into memory only once, in which multiple programs can then access the DLL \(these programs can also be written in different languages and still access the same DLL\)

### Disadvantage

If the DLL isn't present, then the program will terminate and provide an error message, saying that it can't fiund the DLL

This is also the case with if the library is updated, and it doesn't provide backwards compatibility. So if the programmer can't upgrade their program to allow for this update on the library, and can't find a DLL that'll still fit the requirements for their program, then that program won't be able to run.

